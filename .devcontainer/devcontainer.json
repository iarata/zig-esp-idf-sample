{
	"name": "ESP-IDF QEMU",
	"build": {
		"dockerfile": "Dockerfile",
		"args": {
			"DOCKER_TAG": "release-v6.0"
		}
	},
	// USB serial forwarding (macOS):
	// 1. Run on macOS host:  socat TCP-LISTEN:3333,reuseaddr,fork FILE:/dev/tty.usbmodem1101,b115200,raw,echo=0
	// 2. The container will auto-connect via postStartCommand below.
	// For Linux, uncomment the mount instead:
	// "mounts": [
	// 	"source=/dev/bus/usb,target=/dev/bus/usb,type=bind,consistency=cached"
	// ],
	"postStartCommand": "socat PTY,link=/dev/ttyUSB0,raw,echo=0,unlink-close=0 TCP:host.docker.internal:3333 &",
	"customizations": {
		"vscode": {
			"settings": {
				"terminal.integrated.defaultProfile.linux": "bash",
				"idf.espIdfPath": "/opt/esp/idf",
				"idf.customExtraPaths": "",
				"idf.pythonBinPath": "/opt/esp/python_env/idf6.0_py3.14_env/bin/python",
				"idf.toolsPath": "/opt/esp",
				"idf.gitPath": "/usr/bin/git",
				"zig.zls.path": "/opt/zls/bin/zls",
				"zig.path": "/opt/zig-relsafe-x86_64-linux-musl-baseline/zig"
			},
			"extensions": [
				"espressif.esp-idf-extension",
				"ziglang.vscode-zig"
			]
		},
		"codespaces": {
			"settings": {
				"terminal.integrated.defaultProfile.linux": "bash",
				"idf.espIdfPath": "/opt/esp/idf",
				"idf.customExtraPaths": "",
				"idf.pythonBinPath": "/opt/esp/python_env/idf6.0_py3.14_env/bin/python",
				"idf.toolsPath": "/opt/esp",
				"idf.gitPath": "/usr/bin/git",
				"zig.zls.path": "/opt/zls/bin/zls",
				"zig.path": "/opt/zig-relsafe-x86_64-linux-musl-baseline/zig"
			},
			"extensions": [
				"espressif.esp-idf-extension",
				"ziglang.vscode-zig",
				"espressif.esp-idf-web"
			]
		}
	},
	"runArgs": [
		"--privileged"
	]
}
